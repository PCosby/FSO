(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{41:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var c=n(16),o=n.n(c),a=n(4),i=n(2),r=n(3),s=n.n(r),u=n(7),l="/api/persons",d=function(){return s.a.get(l)},b=function(t){return s.a.post(l,t)},j=function(t,e){return s.a.put("".concat(l,"/").concat(t),e)},f=function(t){return s.a.delete("".concat(l,"/").concat(t))},m=n(0),h=function(t){return null==t.type?null:Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"notice",style:{color:"error"==t.type?"red":"green"},children:t.text})})},p=function(t){return Object(m.jsx)("div",{children:Object(m.jsxs)("li",{className:"contact",children:[t.contact.name,": ",t.contact.number," ",Object(m.jsx)("button",{onClick:function(){return function(t){window.confirm("Delete ".concat(t.contact.name,"? This cannot be undone."))&&f(t.contact.id).then((function(){d().then((function(e){t.setContacts(e.data)}))})).catch((function(){t.setNotice({type:"error",text:"".concat(t.contact.name," has already been removed")}),d().then((function(e){t.setContacts(e.data)})),setTimeout((function(){t.setNotice({type:null,text:null})}),5e3)}))}(t)},children:"Delete"})]})})},x=function(t,e){e(t.target.value)},N=function(t){return Object(m.jsxs)("form",{onSubmit:function(t){return t.preventDefault()},children:["Filter:",Object(m.jsx)("input",{value:t.var,onChange:function(e){x(e,t.fun)}})]})},O=function(t){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{onSubmit:function(t){return t.preventDefault()},children:[Object(m.jsx)("h1",{children:"Add new contact:"}),Object(m.jsxs)("div",{children:["Name:",Object(m.jsx)("input",{value:t.newName,onChange:function(e){return x(e,t.setNewName)}})]}),Object(m.jsxs)("div",{children:["Number:",Object(m.jsx)("input",{value:t.newNumber,onChange:function(e){return x(e,t.setNewNumber)}})]})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var n=null;if(t.contacts.forEach((function(e){null==n&&e.name.toLowerCase()===t.newName.toLowerCase()&&(n=e)})),null!=n)!function(t){if(window.confirm("".concat(t.contact.name," is already in the phonebook. Update this number?"))){var e=Object(u.a)(Object(u.a)({},t.contact),{},{number:t.newNumber});j(t.contact.id,e).then((function(){d().then((function(e){t.setContacts(e.data)})),t.setNotice({type:"update",text:"Changed ".concat(t.contact.name,"'s number")}),setTimeout((function(){t.setNotice({type:null,text:null})}),5e3)})).catch((function(){t.setNotice({type:"error",text:"".concat(t.contact.name," has already been removed")}),d().then((function(e){t.setContacts(e.data)})),setTimeout((function(){t.setNotice({type:null,text:null})}),5e3)}))}}({contact:n,newNumber:t.newNumber,setContacts:t.setContacts,setNotice:t.setNotice});else{var c={name:t.newName,number:t.newNumber};b(c).then((function(e){t.setContacts(t.contacts.concat(e.data)),t.setNotice({type:"add",text:"Added ".concat(c.name)}),setTimeout((function(){t.setNotice({type:null,text:null})}),5e3)})),t.setNewName(""),t.setNewNumber("")}},children:"Add"})})]})},w=function(t){var e=t.pplList.filter((function(e){return e.name.toLowerCase().includes(t.filterText.toLowerCase())||0===t.filterText.length}));return Object(m.jsx)("ul",{children:e.map((function(e){return Object(m.jsx)(p,{contact:e,setContacts:t.setContacts,setNotice:t.setNotice},e.id)}))})},v=function(t){var e=Object(i.useState)(""),n=Object(a.a)(e,2),c=n[0],o=n[1],r=Object(i.useState)([]),s=Object(a.a)(r,2),u=s[0],l=s[1],b=Object(i.useState)(""),j=Object(a.a)(b,2),f=j[0],p=j[1],x=Object(i.useState)(""),v=Object(a.a)(x,2),y=v[0],C=v[1],T=Object(i.useState)({type:null,text:null}),g=Object(a.a)(T,2),S=g[0],L=g[1];return Object(i.useEffect)((function(){d().then((function(t){l(t.data)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),Object(m.jsx)(h,{type:S.type,text:S.text}),Object(m.jsx)(N,{fun:o,var:c}),Object(m.jsx)(O,{contacts:u,setContacts:l,setNotice:L,newName:f,setNewName:p,newNumber:y,setNewNumber:C}),Object(m.jsx)("h1",{children:"Numbers"}),Object(m.jsx)(w,{pplList:u,filterText:c,setContacts:l,setNotice:L})]})};n(41);o.a.render(Object(m.jsx)(v,{notes:[{id:1,content:"HTML is easy",date:"2019-05-30T17:30:31.098Z",important:!0},{id:2,content:"Browser can execute only JavaScript",date:"2019-05-30T18:39:34.091Z",important:!1},{id:3,content:"GET and POST are the most important methods of HTTP protocol",date:"2019-05-30T19:20:14.298Z",important:!0}]}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.59726118.chunk.js.map